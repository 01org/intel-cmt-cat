========================================================================
README for intel_pid_cache_flush kernel module

January 2019
========================================================================


Contents
========

- Overview
- Compilation
- Usage
- Legal Disclaimer


Overview
========

intel_pid_cache_flush kernel module allows to flush CPU caches for a given
Process ID (PID). It invalidates cache lines belonging to specific PID
from all levels of the processor (both, code and data) cache hierarchy using
CLFLUSH instruction. CLFLUSH instruction is used as it operates on cache lines
as distinct from WBINVD instruction which operates on whole cache
causing cross-system disturbances.

PID to be flushed is accepted via /proc/intel_pid_cache_flush file.


COMPILATION
===========

Run "make" to compile the kernel module. If compilation is successful
"intel_pid_cache_flush.ko" kernel module should be present in the directory.

Run "make clean" to clean the build files.


Usage
=====

To load kernel module run:
    sudo insmod ./intel_pid_cache_flush.ko

To verify that module was loaded correctly please see kernel messages via dmesg
and/or check for /proc/intel_pid_cache_flush file

To remove kernel module run:
    sudo rmmod intel_pid_cache_flush

To flush CPU caches for given PID (e.g.: 1234):
    sudo bash -c 'echo 1234 > /proc/intel_pid_cache_flush'


Legal Disclaimer
================

THIS SOFTWARE IS PROVIDED BY INTEL"AS IS". NO LICENSE, EXPRESS OR
IMPLIED, BY ESTOPPEL OR OTHERWISE, TO ANY INTELLECTUAL PROPERTY RIGHTS
ARE GRANTED THROUGH USE. EXCEPT AS PROVIDED IN INTEL'S TERMS AND
CONDITIONS OF SALE, INTEL ASSUMES NO LIABILITY WHATSOEVER AND INTEL
DISCLAIMS ANY EXPRESS OR IMPLIED WARRANTY, RELATING TO SALE AND/OR
USE OF INTEL PRODUCTS INCLUDING LIABILITY OR WARRANTIES RELATING TO
FITNESS FOR A PARTICULAR PURPOSE, MERCHANTABILITY, OR INFRINGEMENT
OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.
